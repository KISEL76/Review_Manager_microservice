<h1 align="center"> Review Manager </h1>

<p align="center">
  <img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbHV4OW54a254eGlxNGppYjB2cHFsOXkxdW02N3k1YTFzaGl5MWxyYSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/QYkX9IMHthYn0Y3pcG/giphy.gif" alt="alt" width="300" />
</p>

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–∏–≤–µ—Ç! üëã**

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–µ–ª–µ–Ω –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–ª–æ–µ–≤: —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏(–ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ë–î), —Å–µ—Ä–≤–∏—Å—ã(–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
–∏ —Ö—ç–Ω–¥–ª–µ—Ä—ã –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–æ–º –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º. –ò–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª–æ–µ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–∞–∫–µ—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ DTO –∏ —Å–∞–º–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä DTO.

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π —Ä–µ–≤—å—é–≤–µ—Ä–æ–º –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º `/stats/reviewers`

–í –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏(–ø–æ–∫—Ä—ã—Ç–∏–µ >80%), E2E —Ç–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ(—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω—ã –Ω–∏–∂–µ). –í –ø—Ä–æ–µ–∫—Ç —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏–Ω—Ç–µ—Ä—ã –¥–ª—è –∫–æ–¥—Å—Ç–∞–π–ª–∞(–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–æ –Ω–∏–∂–µ).

–¢–∞–∫–∂–µ —è –∑–∞–¥–µ–ø–ª–æ–∏–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —á–µ—Ä–µ–∑ nginx –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã–π –º–Ω–µ –ø–æ–¥–¥–æ–º–µ–Ω [`https://marketplace.kisel76.ru`](https://marketplace.kisel76.ru). –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É.

–Ø –ø–æ—Å—Ç–∞—Ä–∞–ª—Å—è —É—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ(–∏–ª–∏ –ø–æ—á—Ç–∏ –≤—Å–µ) —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å —Å–æ–≤–µ—Ç–∞–º–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∑–∞ –ø—Ä–æ—à–ª—ã–µ –≤–æ–ª–Ω—ã. –•–æ—Ç–µ–ª–æ—Å—å –±—ã —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –æ–Ω–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã–º–∏. –ò —ç—Ç–æ –∫—Ä—É—Ç–æ, —á—Ç–æ –∑–¥–µ—Å—å –µ—Å—Ç—å —Ç–∞–∫–æ–π —Ä–∞–∑–±–æ—Ä –ø–æ–ª–µ—Ç–æ–≤ –≤ —Ç–∞–∫–æ–º –æ–±—ä–µ–º–µ.

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

1. –í –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ª–µ–∂–∏—Ç —Ñ–∞–π–ª `.env.example`. –ù–∞ –µ–≥–æ –æ—Å–Ω–æ–≤–µ —Å–æ–∑–¥–∞–µ–º `.env`:

```bash
cp .env.example .env
```

2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∞–≤–∏–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env` (–ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞, –¥–∞–Ω–Ω—ã–µ –¥–ª—è DSN PostgreSQL –∏ —Ç.–¥.).

3. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç:

```bash
make build
```

4. –ü–æ–¥–Ω–∏–º–∞–µ–º —Å–µ—Ä–≤–∏—Å –∏ –ë–î:

```bash
make up
```

5. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ API –∂–∏–≤–æ (–ø–æ—Ä—Ç –±–µ—Ä—ë—Ç—Å—è –∏–∑ `APP_PORT`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080):

```bash
curl http://localhost:8080/health
```
> **–í—Å–µ HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –¥–∞–Ω–Ω—ã–º `task/openapi.yml`**

6. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
make down      
```

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–µ–π Makefile
```bash
make # –¶–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ `make up`)

make build # –°–æ–±—Ä–∞—Ç—å Docker-–æ–±—Ä–∞–∑—ã, –Ω–µ –ø–æ–¥–Ω–∏–º–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

make rebuild # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Docker-–æ–±—Ä–∞–∑—ã –±–µ–∑ –∫—ç—à–∞

make up # –ü–æ–¥–Ω—è—Ç—å —Å–µ—Ä–≤–∏—Å –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Ñ–æ–Ω–µ

make down # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —É–¥–∞–ª–∏—Ç—å –∏—Ö

make down-v # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —É–¥–∞–ª–∏—Ç—å –∏—Ö –≤–º–µ—Å—Ç–µ —Å volumes

make logs # –õ–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ 

make test-unit # –ó–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

# –ó–∞–ø—É—Å–∫ e2e-—Ç–µ—Å—Ç–∞:
# 1. –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥–º–µ–Ω—è–µ—Ç .env -> .env.example
# 2. –ø–æ–¥–Ω–∏–º–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ç–µ–Ω–¥ (COMPOSE_PROJECT_NAME=review_manager_e2e)
# 3. –≥–æ–Ω—è–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ microservice/tests/e2e
# 4. –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–µ–Ω–¥, –≤–æ–∑–≤—Ä–∞—â–∞—è –∏—Å—Ö–æ–¥–Ω—ã–π .env
make test-e2e

make coverage # –ü–æ—Å—á–∏—Ç–∞—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ unit-—Ç–µ—Å—Ç–∞–º–∏ –∏ –≤—ã–≤–µ—Å—Ç–∏ —Å–≤–æ–¥–∫—É

make coverage-html # HTML-–æ—Ç—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

make fmt # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

make lint # –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞

make clean # –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ 
```
> **–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.**

## –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 
–ù–∞–≥—Ä—É–∑–∫—É –≥–æ–Ω—è–ª —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã [`vegeta`](https://github.com/tsenart/vegeta).

**–°—Ç–µ–Ω–¥**

- –û–∫—Ä—É–∂–µ–Ω–∏–µ: macOS (M1 Pro) + Docker Desktop
- –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –±–∞–∑–∞ –Ω–µ –ø—É—Å—Ç–∞—è: 10 –∫–æ–º–∞–Ω–¥ –∏ 40 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É —á–∞—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –µ—Å—Ç—å PR, —á—Ç–æ–±—ã `/users/getReview` –≤–æ–∑–≤—Ä–∞—â–∞–ª —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–æ—Ñ–∏–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏**

–ù–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ç–∏–ø–∏—á–Ω—ã–π read-heavy —Å—Ü–µ–Ω–∞—Ä–∏–π.

–†–µ–∂–∏–º: `rate = 5 RPS`, `duration = 60s` (–∏—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–Ω–æ 300 –∑–∞–ø—Ä–æ—Å–æ–≤)

–°–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- `GET /health`
- `GET /team/get?team_name=...`
- `GET /users/getReview?user_id=...`:
- `GET /stats/reviewers`

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
Requests      [total, rate, throughput]         300, 5.02, 5.02
Duration      [total, attack, wait]             59.805s, 59.8s, 5.059ms
Latencies     [min, mean, 50, 90, 95, 99, max]  814.708¬µs, 4.272ms, 3.757ms, 6.472ms, 7.942ms, 10.516ms, 65.918ms
Bytes In      [total, mean]                     5850, 19.50
Bytes Out     [total, mean]                     0, 0.00
Success       [ratio]                           100.00%
Status Codes  [code:count]                      200:300  
Error Set:
```


## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
- govet ‚Äì –±–∞–∑–æ–≤—ã–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏
- staticcheck ‚Äì –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- goimports ‚Äì —Ñ–æ—Ä–º–∞—Ç –∫–æ–¥–∞ –∏ –∏–º–ø–æ—Ä—Ç—ã
- revive ‚Äì —Å—Ç–∏–ª—å –∫–æ–¥–∞, —á–∏—Ç–∞–µ–º–æ—Å—Ç—å
- errcheck ‚Äì –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
- ineffassign ‚Äì –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
- misspell ‚Äì –æ–ø–µ—á–∞—Ç–∫–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö/—Å—Ç—Ä–æ–∫–∞—Ö


